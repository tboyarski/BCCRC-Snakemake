# bamMetrics Module (Multi-Snakemake)
This directory contains the bamMetrics modules. It is a multi-module system. 

## Modules:
* collectGCBias - Generate GCBias data for a '.BAM' file. **NOTE Use >= -Xmx4G for picard**
* collectMERGE_ADAPTOR - Concatenate metrics files of the same type. 
* collectMultMetrics - Generate multiple metrics for a '.BAM' file.
* collectRNASeq - Generate RNASeq data for a '.BAM' file.
* collectWGS - Generate WGS data for a '.BAM' file.
* flagStats - Use Samtools "flagStat" command to generate output for a '.BAM' file.
* readLen - Generate metrics on the read length of aligned '.BAM' file. 

## Logging:
Will be stored in: "log/bamMetrics"

## Global Directories:
* inputDIR = Directory to contain all files prior to starting pipeline.
* outputDIR = Directory to contain all file generated by the pipeline
* bamDIR = Directory to contain the '.BAM' files.
* metricsDIR = Directory to contain metrics output.

## Global Paramters:
Module | Argument | Default Value | Description
:--------: | :--------: | :--------: | :--------
All | refFILE | ../path/to/GRCh37-lite.fa | Absolute path to genomic reference file.
All | offCluster | False | Adds input redirection to end of shell calls as to capture STDERR when not on cluster.
All | shellCallFile | shellCalls.txt | File to which a copy of all shell calls is printed.

## Module Specific Paramters:
Module | Argument | Default Value | Description
:--------- | :--------: | :--------: | :--------
All | bamMetricsDIR | bamMetrics | Directory to store bamMetrics log files.
collect* | bamMetricsPicardValStringency | VALIDATION_STRINGENCY=LENIENT | Validation stringency for all SAM files read by this program.
collect* | bamMetricsPicardMexRec | MAX_RECORDS_IN_RAM=5000000 | Specify the number of records stored in RAM before spilling to disk.
 collectMultMetrics | fileOutputSuffixLIST | ['alignment_summary_metrics', 'base_distribution_by_cycle_metrics', 'base_distribution_by_cycle.pdf', 'insert_size_histogram.pdf', 'insert_size_metrics', 'quality_by_cycle_metrics', 'quality_by_cycle.pdf', 'quality_distribution_metrics', 'quality_distribution.pdf'] | Used to generate the list of output files produced by this submodule.
collectRNASeq | RRNAIntervalList="RRNAIntervalList: /extscratch/clc/references/rRNA.ensg72.hg19.interval_list | Absolute path to the interval list.
collectRNASeq | RefFlat | /extscratch/clc/references/refseq.hg19.refFlat | Aboslute path to the reference flat.
collectRNASeq | StrandSpecificity="StrandSpecificity: NONE | For strand-specific library prep.
